---
stages:
  - ðŸ”Ž test

image: quay.io/testing-farm/python-ci-image:latest

workflow:
  rules:
    - if: $CI_MERGE_REQUEST_IID

#
# ðŸ”Ž test
#
pre-commit:
  stage: ðŸ”Ž test
  script:
    - pre-commit run --all-files

e2e:
  # cypress does not do rolling tags, so this needs to be updated every now and then
  image:
    name: docker.io/cypress/included:10.10.0
    entrypoint: [""]
  stage: ðŸ”Ž test
  script:
    - python3 -m http.server 8000 &
    - cypress run
